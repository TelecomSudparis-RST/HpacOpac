<!--

	Ignacio Tamayo, TSP, 2016
	Version 1.3
	Date: August 2016

	Web Page showing the simulation results of applying the selected Migrations in the Infrastructure, based on the Demands
	
	There is a Button to run the execute the Simulation in the /Migrations page
	
	:param migrationsList: List of Migrations to execute
	:type migrationsList: DataModels.Migration[]
	:param redirectsList: List of Redirections to execute
	:type redirectsList: DataModels.Redirection[]
	:param Demands: List of Demands to satisfy
	:type instantiationList: DataModels.Instantiation[]
-->

{% extends 'layout.html' %}

      
{% block body %}


<h2>List of Executed Migrations</h2>
<p> 
	Values taken from HMAC algorithm result page, based on the selected items in the list.
</p>
<br/> 

    <table class="table table-striped table-bordered table-hover model-list">
        <thead>
            <tr>
				<th class="column-header">
					Demand <br> Clients@Location[DemandVolume]
                </th>
				<th class="column-header">
                    vCDN
                </th>
                <th class="column-header">
					From POP
                </th>
                <th class="column-header">
                    To POP
                </th>
                <th class="column-header">
					
                </th>
            </tr>
        </thead>
        {% for mig in migrationsList %}
			<tr>
				<td class="col-name">   {{ mig.demand.clientGroup.name }} @ {{ mig.demand.clientGroup.location.name }} [{{ mig.demand.volume }}] </td>
				<td class="col-name" >  {{ mig.instance.vcdn.name }}  </td>
				<td class="col-name">   {{ mig.instance.pop.name }} @ {{ mig.instance.pop.location.name }} </td>
				<td class="col-name">   {{ mig.dstPOP.name }} @ {{ mig.dstPOP.location.name }}  </td>
				<td class="col-name">  Migration </td>
			</tr>
        {% endfor %}
        {% for red in redirectsList %}
			<tr>
				<td class="col-name">   {{ red.demand.clientGroup.name }} @ {{ red.demand.clientGroup.location.name }} [{{ red.demand.volume }}] </td>
				<td class="col-name" >  {{ red.instance.vcdn.name }}  </td>
				<td class="col-name">   {{ red.instance.pop.name }} @ {{ red.instance.pop.location.name }} </td>
				<td class="col-name">   {{ red.dstPOP.name }} @ {{ red.dstPOP.location.name }}  </td>
				<td class="col-name">  Redirection </td>
			</tr>
        {% endfor %}
	</table>
	<br>

<h2>List of Instantiations </h2>
<p> Values taken from HMAC algorithm result page, based on the selected items in the list. </p>
<br/> 


	<table class="table table-striped table-bordered table-hover model-list">
        <thead>
            <tr>
				<th class="column-header">
					Demand<br> Clients@Location[DemandVolume]
                </th>
				<th class="column-header">
                    vCDN
                </th>
                <th class="column-header">
					POP
                </th>
               
            </tr>
        </thead>
    {% for d in invalidDemandList %}
		<tr>
			<td class="col-name">   {{ d.clientGroup.name }} @ {{ d.clientGroup.location.name }} [{{ d.volume }}] </td>
			<td class="col-name" >  {{ d.vcdn.name }}  </td>
			<td class="col-name">   {{ d.pop.name }} @ {{ d.pop.location.name }} </td>
			
		</tr>
	{% endfor %}
	</table>
	<br>

<h2>Topologie Capacity Gomory-Hu Trees </h2>
<p> The Topology Capacity Graph evolves according to the Demands and the selected Optimizations. </p>
<br/> 

<table class="table table-bordered" >
	<thead>
<tr>
	<th> 
		Topologie Capacity Gomory-Hu Tree
	</th>
	<th> 
		Remaining Capacity Gomory-Hu Tree 
		<br>
		after Demands
	</th>
	<th> 
		Optimized Capacity Gomory-Hu Tree 
		<br>
		after Migrations
	</th>
</tr>
</thead>
<tr>
	<td>
		<a href="{{ url_for('image', imageFilename=Topologie_Gomuri_filename, imageTitle="Capacity")  }}" target="_blank" >
			<img src="{{ url_for('static', filename=Topologie_Gomuri_filename)  }}" alt="Gomuri" class="topologieImg">
		</a>
	</td>
	<td>
		<a href="{{ url_for('image', imageFilename=Topologie_Gomuri_Demanded_filename, imageTitle="Capacity before Optimization")  }}" target="_blank" >
			<img src="{{ url_for('static', filename=Topologie_Gomuri_Demanded_filename)  }}" alt="Gomuri" class="topologieImg">
		</a>
	</td>
	<td>
		<a href="{{ url_for('image', imageFilename=Topologie_Gomuri_Simulated_filename, imageTitle="Capacity after Optimization")  }}" target="_blank" >
			<img src="{{ url_for('static', filename=Topologie_Gomuri_Simulated_filename)  }}" alt="Gomuri" class="topologieImg">
		</a>
	</td>
</tr>
</table>

<small>Click to open in a separate window. Take care of refreshing the page to update the browser's cache.</small>
<br>
<small>The edges values are given in [Mbps]. The radius of the POP node is proportional to the amount of Instances it contains</small>

	<br>
       

{% endblock %}
